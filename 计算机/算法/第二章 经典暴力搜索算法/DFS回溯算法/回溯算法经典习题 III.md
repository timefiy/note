---
title: å›æº¯ç®—æ³•ç»å…¸ä¹ é¢˜ III
source: https://labuladong.online/zh/algo/problem-set/backtrack-iii/
author:
  - "[[../../../../author/labuladong]]"
published:
created: 2026-02-17
description: æœ¬æ–‡æ±‡æ€»äº† åŠ›æ‰£/LeetCode ä¸Šå›æº¯ç®—æ³•ç®—æ³•çš„ç»å…¸ä¹ é¢˜ï¼ˆç¬¬ä¸‰éƒ¨åˆ†ï¼‰ï¼ŒåŒ…å« labuladong æ€è·¯è®²è§£å’Œç®—æ³•å¯è§†åŒ–ï¼Œæ•™ä¼šè¯»è€…å¦‚ä½•å¥—ç”¨å›æº¯ç®—æ³•ä»£ç æ¡†æ¶ã€‚æ”¯æŒ Java/C++/Python/Golang/JavaScriptã€‚
tags:
  - clippings
---
### 301\. åˆ é™¤æ— æ•ˆçš„æ‹¬å·

**301\. åˆ é™¤æ— æ•ˆçš„æ‹¬å·** | [åŠ›æ‰£](https://leetcode.cn/problems/remove-invalid-parentheses/) | [LeetCode](https://leetcode.com/problems/remove-invalid-parentheses/)

ç»™ä½ ä¸€ä¸ªç”±è‹¥å¹²æ‹¬å·å’Œå­—æ¯ç»„æˆçš„å­—ç¬¦ä¸² `s` ï¼Œåˆ é™¤æœ€å°æ•°é‡çš„æ— æ•ˆæ‹¬å·ï¼Œä½¿å¾—è¾“å…¥çš„å­—ç¬¦ä¸²æœ‰æ•ˆã€‚

è¿”å›æ‰€æœ‰å¯èƒ½çš„ç»“æœã€‚ç­”æ¡ˆå¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "()())()"
è¾“å‡ºï¼š["(())()","()()()"]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "(a)())()"
è¾“å‡ºï¼š["(a())()","(a)()()"]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šs = ")("
è¾“å‡ºï¼š[""]
```

**æç¤ºï¼š**

- `1 <= s.length <= 25`
- `s` ç”±å°å†™è‹±æ–‡å­—æ¯ä»¥åŠæ‹¬å· `'('` å’Œ `')'` ç»„æˆ
- `s` ä¸­è‡³å¤šå« `20` ä¸ªæ‹¬å·

é¢˜ç›®æ¥æºï¼š [åŠ›æ‰£ 301. åˆ é™¤æ— æ•ˆçš„æ‹¬å·](https://leetcode.cn/problems/remove-invalid-parentheses/) ã€‚

#### åŸºæœ¬æ€è·¯

è¿™é“é¢˜çš„éš¾åº¦ç­‰çº§æ˜¯å›°éš¾ï¼Œä¸è¿‡ä½ ä¸è¦è¢«å“ä½äº†ï¼Œæœ‰ [å›æº¯ç®—æ³•æ ¸å¿ƒå¥—è·¯æ¡†æ¶](https://labuladong.online/zh/algo/essential-technique/backtrack-framework/) çš„æ€è·¯æŒ‡å¯¼ï¼Œä½ å°±åªéœ€è¦æ€è€ƒå¦‚ä½•ç©·ä¸¾å°±è¡Œäº†ã€‚

é¦–å…ˆï¼Œ `s` ä¸­åŒ…å«çš„è‹±æ–‡å­—æ¯éƒ½æ˜¯è¿·é­‚å¼¹ï¼ŒåŸæ ·ä¿ç•™å°±è¡Œäº†ï¼Œæˆ‘ä»¬å…ˆç›´æ¥å¿½ç•¥ã€‚

å¯¹äºä¸€ä¸ªå·¦æ‹¬å·æˆ–è€…å³æ‹¬å·ï¼Œå®ƒä»¬æœ‰ä»€ä¹ˆå¯èƒ½ï¼Ÿå¾ˆç®€å•ï¼Œè¦ä¹ˆè¢«ä¿ç•™ï¼Œè¦ä¹ˆè¢«åˆ é™¤ã€‚è¿™æ ·ä¸€æ¥ï¼Œå¿ƒé‡Œé‚£æ£µäºŒå‰æ ‘å‡ºæ¥æ²¡æœ‰ï¼Ÿ

å¿ƒé‡Œæœ‰äº†è¿™æ£µäºŒå‰ç©·ä¸¾æ ‘ï¼Œè‚¯å®šå¯ä»¥å†™ä¸€ä¸ª `2^n` çš„æš´åŠ›ç©·ä¸¾è§£æ³•ï¼Œä¸‹é¢çš„å¯è§†åŒ–é¢æ¿å±•ç¤ºäº†è¿™æ£µé€’å½’æ ‘ï¼Œä½ å¯ä»¥æ‹‰åˆ°æœ€åï¼Œé¼ æ ‡ç§»åŠ¨åˆ°é€’å½’æ ‘ä¸Šï¼Œå³å¯çœ‹åˆ°æ¯ä¸ªæ‹¬å·æ‰€åšçš„é€‰æ‹©ï¼š

ç®—æ³•å¯è§†åŒ–

è¿™ä¸ªè§£æ³•åº”è¯¥å¯ä»¥é€šè¿‡åŠ›æ‰£çš„åˆ¤é¢˜ç³»ç»Ÿï¼Œä½†æ˜¾ç„¶æ•ˆç‡ä¸é«˜ã€‚ä¸è¿‡å¦‚æœè®©ä½ è‡ªå·±å†™è¿™é“é¢˜ï¼Œè¿è¿™ä¸ªç®—æ³•éƒ½å†™ä¸å‡ºæ¥çš„è¯ï¼Œæˆ‘å»ºè®®æš‚æ—¶ä¸è¦æ²‰è¿·äºæœ€ä¼˜è§£äº†ï¼Œå…ˆåšåˆ°èƒ½å¤Ÿè‡ªå·±å†™å‡ºè¿™ä¸ªè§£æ³•å†è°ˆè¿›ä¸€æ­¥çš„ä¼˜åŒ–ã€‚å› ä¸ºåé¢çš„ä¼˜åŒ–éƒ½æ˜¯åŸºäºè¿™ä¸ªæœ€ç®€å•ç²—æš´çš„è§£æ³•å»¶ä¼¸å‡ºæ¥çš„ã€‚

é‚£ä¹ˆï¼Œå¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿå…¶å®å¾ˆç®€å•ï¼Œæœ‰äº›æ‹¬å·æ˜¯æˆ‘ä»¬ç¬ƒå®šå¿…é¡»è¢«åˆ é™¤çš„ï¼Œä½ æ˜¯æœ‰åŠæ³•é€šè¿‡å·¦å³æ‹¬å·çš„æ•°é‡æ¥åˆ¤æ–­çš„ã€‚

æ¯”å¦‚è¯´ `s = "())??"` ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ç”¨ `i` ä»å·¦åˆ°å³éå† `s` ï¼Œæ‰€ä»¥ `i` åé¢çš„å­—ç¬¦å¤„äºæœªçŸ¥çŠ¶æ€ï¼Œæˆ‘å°±ç”¨ `?` è¡¨ç¤ºäº†ã€‚

ç°åœ¨ä½ çš„ `i` éå†åˆ°äº†ç¬¬äºŒä¸ªå³æ‹¬å·ï¼Œä½ å‘Šè¯‰æˆ‘ï¼Œè¿™é‡Œä½ è¿˜éœ€è¦çŠ¹è±«å—ï¼Ÿè¿™ä¸ªå³æ‹¬å·è‚¯å®šæ˜¯è¦åˆ é™¤çš„ï¼Œå› ä¸ºå®ƒå‰é¢å¿…ç„¶æ²¡æœ‰å·¦æ‹¬å·å’Œå®ƒåŒ¹é…ï¼Œæ‰€ä»¥å®ƒè‚¯å®šæ˜¯å¤šä½™çš„ã€‚

è¿™å°±æ˜¯ä¼˜åŒ–çš„åˆ‡å…¥ç‚¹ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ `leftCount` å˜é‡è®°å½•å·¦æ‹¬å·çš„æ•°é‡ï¼Œä»è€Œé¢„åˆ¤åé¢çš„æ‹¬å·æ˜¯å¦å¤šä½™ï¼Œæˆ‘ä¹Ÿç»™å‡ºäº†è¿™ä¸ªä¼˜åŒ–è§£æ³•ã€‚

#### è§£æ³•ä»£ç 

```
// æœªä¼˜åŒ–çš„å›æº¯è§£æ³•

class Solution1 {

    vector<string> res;

    string track;

public:

    vector<string> removeInvalidParentheses(string s) {

        backtrack(s, 0);

        // ç­›é€‰å‡ºæœ€é•¿çš„æœ‰æ•ˆæ‹¬å·å­—ç¬¦ä¸²

        int maxLen = 0;

        for (const string& str : res) {

            maxLen = max(maxLen, (int)str.length());

        }

        unordered_set<string> set;

        for (const string& str : res) {

            if (str.length() == maxLen) {

                set.insert(str);

            }

        }

        return vector<string>(set.begin(), set.end());

    }

    // å›æº¯ç®—æ³•æ¡†æ¶ï¼Œç©·ä¸¾æ‰€æœ‰å¯èƒ½çš„æœ‰æ•ˆæ‹¬å·

    void backtrack(const string& s, int i) {

        if (i == s.length()) {

            if (isValid(track)) {

                res.push_back(track);

            }

            return;

        }

        char c = s[i];

        if (c != '(' && c != ')') {

            // è‹±æ–‡å­—æ¯ï¼Œå¿…ç„¶ä¸ä¼šè¢«åˆ é™¤ï¼Œæ‰€ä»¥ç›´æ¥åŠ å…¥ track

            track.push_back(c);

            backtrack(s, i + 1);

            track.pop_back();

        } else {

            // æ‹¬å·ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼Œè¦ä¹ˆä¿ç•™ï¼Œè¦ä¹ˆåˆ é™¤

            // å…ˆçœ‹ç¬¬ä¸€ç§æƒ…å†µï¼Œä¿ç•™å½“å‰æ‹¬å·ï¼ŒåŠ å…¥ track

            // åšé€‰æ‹©

            track.push_back(c);

            backtrack(s, i + 1);

            // æ’¤é”€é€‰æ‹©

            track.pop_back();

            // å†çœ‹ç¬¬äºŒç§æƒ…å†µï¼Œåˆ é™¤å½“å‰æ‹¬å·

            // ä¸ç”¨åŠ å…¥ trackï¼Œä¹Ÿå°±æ²¡æœ‰åšé€‰æ‹©æ’¤é”€é€‰æ‹©çš„è¿‡ç¨‹

            backtrack(s, i + 1);

        }

    }

    // åˆ¤æ–­æ‹¬å·å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆ

    bool isValid(const string& s) {

        int left = 0;

        for (char c : s) {

            if (c == '(') {

                left++;

            } else if (c == ')') {

                left--;

                if (left < 0) {

                    // å³æ‹¬å·æ¯”å·¦æ‹¬å·å¤šï¼Œè‚¯å®šæ— æ•ˆ

                    return false;

                }

            }

        }

        // å¦‚æœå·¦æ‹¬å·çš„æ•°é‡ç­‰äºå³æ‹¬å·çš„æ•°é‡ï¼Œæ‰æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ‹¬å·å­—ç¬¦ä¸²

        return left == 0;

    }

};

// ç”¨å·¦æ‹¬å·æ•°é‡ä¼˜åŒ–å›æº¯è§£æ³•

class Solution {

    vector<string> res;

    string track;

public:

    vector<string> removeInvalidParentheses(string s) {

        backtrack(s, 0, 0);

        int maxLen = 0;

        for (const string& str : res) {

            maxLen = max(maxLen, (int)str.length());

        }

        unordered_set<string> set;

        for (const string& str : res) {

            if (str.length() == maxLen) {

                set.insert(str);

            }

        }

        return vector<string>(set.begin(), set.end());

    }

    void backtrack(const string& s, int i, int leftCount) {

        if (i == s.length()) {

            if (isValid(track)) {

                res.push_back(track);

            }

            return;

        }

        char c = s[i];

        if (c != '(' && c != ')') {

            track.push_back(c);

            backtrack(s, i + 1, leftCount);

            track.pop_back();

        } else {

            // å…ˆçœ‹ç¬¬ä¸€ç§æƒ…å†µï¼Œä¿ç•™å½“å‰æ‹¬å·ï¼ŒåŠ å…¥ track

            // æ–°å¢å‰ªæé€»è¾‘ï¼Œä»…å½“è¿˜æœ‰å¤šä½™çš„å·¦æ‹¬å¯ä»¥å’Œå³æ‹¬å·æŠµæ¶ˆçš„æƒ…å†µä¸‹ï¼Œæ‰è€ƒè™‘ä¿ç•™å½“å‰æ‹¬å·

            if (leftCount > 0 || s[i] != ')') {

                // åšé€‰æ‹©

                track.push_back(c);

                if (c == '(') {

                    leftCount++;

                } else {

                    leftCount--;

                }

                backtrack(s, i + 1, leftCount);

                // æ’¤é”€é€‰æ‹©

                track.pop_back();

                if (c == '(') {

                    leftCount--;

                } else {

                    leftCount++;

                }

            }

            // å†çœ‹ç¬¬äºŒç§æƒ…å†µï¼Œåˆ é™¤å½“å‰æ‹¬å·

            backtrack(s, i + 1, leftCount);

        }

    }

    bool isValid(const string& s) {

        int left = 0;

        for (char c : s) {

            if (c == '(') {

                left++;

            } else if (c == ')') {

                left--;

                if (left < 0) {

                    return false;

                }

            }

        }

        return left == 0;

    }

};
```

#### ç®—æ³•å¯è§†åŒ–

ç®—æ³•å¯è§†åŒ–

### 2850\. å°†çŸ³å¤´åˆ†æ•£åˆ°ç½‘æ ¼å›¾çš„æœ€å°‘ç§»åŠ¨æ¬¡æ•°

**2850\. å°†çŸ³å¤´åˆ†æ•£åˆ°ç½‘æ ¼å›¾çš„æœ€å°‘ç§»åŠ¨æ¬¡æ•°** | [åŠ›æ‰£](https://leetcode.cn/problems/minimum-moves-to-spread-stones-over-grid/) | [LeetCode](https://leetcode.com/problems/minimum-moves-to-spread-stones-over-grid/)

ç»™ä½ ä¸€ä¸ªå¤§å°ä¸º `3 * 3` Â ï¼Œä¸‹æ ‡ä» **0** Â å¼€å§‹çš„äºŒç»´æ•´æ•°çŸ©é˜µÂ  `grid` Â ï¼Œåˆ†åˆ«è¡¨ç¤ºæ¯ä¸€ä¸ªæ ¼å­é‡ŒçŸ³å¤´çš„æ•°ç›®ã€‚ç½‘æ ¼å›¾ä¸­æ€»å…±æ°å¥½æœ‰Â  `9` ä¸ªçŸ³å¤´ï¼Œä¸€ä¸ªæ ¼å­é‡Œå¯èƒ½ä¼šæœ‰ **å¤šä¸ª** çŸ³å¤´ã€‚

æ¯ä¸€æ¬¡æ“ä½œä¸­ï¼Œä½ å¯ä»¥å°†ä¸€ä¸ªçŸ³å¤´ä»å®ƒå½“å‰æ‰€åœ¨æ ¼å­ç§»åŠ¨åˆ°ä¸€ä¸ªè‡³å°‘æœ‰ä¸€æ¡å…¬å…±è¾¹çš„ç›¸é‚»æ ¼å­ã€‚

è¯·ä½ è¿”å›æ¯ä¸ªæ ¼å­æ°å¥½æœ‰ä¸€ä¸ªçŸ³å¤´çš„ **æœ€å°‘ç§»åŠ¨æ¬¡æ•°** ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://labuladong.online/images/lc/uploads/2023/08/23/example1-3.svg)

```
è¾“å…¥ï¼šgrid = [[1,1,0],[1,1,1],[1,2,1]]
è¾“å‡ºï¼š3
è§£é‡Šï¼šè®©æ¯ä¸ªæ ¼å­éƒ½æœ‰ä¸€ä¸ªçŸ³å¤´çš„ä¸€ä¸ªæ“ä½œåºåˆ—ä¸ºï¼š
1 - å°†ä¸€ä¸ªçŸ³å¤´ä»æ ¼å­ (2,1) ç§»åŠ¨åˆ° (2,2) ã€‚
2 - å°†ä¸€ä¸ªçŸ³å¤´ä»æ ¼å­ (2,2) ç§»åŠ¨åˆ° (1,2) ã€‚
3 - å°†ä¸€ä¸ªçŸ³å¤´ä»æ ¼å­ (1,2) ç§»åŠ¨åˆ° (0,2) ã€‚
æ€»å…±éœ€è¦ 3 æ¬¡æ“ä½œè®©æ¯ä¸ªæ ¼å­éƒ½æœ‰ä¸€ä¸ªçŸ³å¤´ã€‚
è®©æ¯ä¸ªæ ¼å­éƒ½æœ‰ä¸€ä¸ªçŸ³å¤´çš„æœ€å°‘æ“ä½œæ¬¡æ•°ä¸º 3 ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

![](https://labuladong.online/images/lc/uploads/2023/08/23/example2-2.svg)

```
è¾“å…¥ï¼šgrid = [[1,3,0],[1,0,0],[1,0,3]]
è¾“å‡ºï¼š4
è§£é‡Šï¼šè®©æ¯ä¸ªæ ¼å­éƒ½æœ‰ä¸€ä¸ªçŸ³å¤´çš„ä¸€ä¸ªæ“ä½œåºåˆ—ä¸ºï¼š
1 - å°†ä¸€ä¸ªçŸ³å¤´ä»æ ¼å­ (0,1) ç§»åŠ¨åˆ° (0,2) ã€‚
2 - å°†ä¸€ä¸ªçŸ³å¤´ä»æ ¼å­ (0,1) ç§»åŠ¨åˆ° (1,1) ã€‚
3 - å°†ä¸€ä¸ªçŸ³å¤´ä»æ ¼å­ (2,2) ç§»åŠ¨åˆ° (1,2) ã€‚
4 - å°†ä¸€ä¸ªçŸ³å¤´ä»æ ¼å­ (2,2) ç§»åŠ¨åˆ° (2,1) ã€‚
æ€»å…±éœ€è¦ 4 æ¬¡æ“ä½œè®©æ¯ä¸ªæ ¼å­éƒ½æœ‰ä¸€ä¸ªçŸ³å¤´ã€‚
è®©æ¯ä¸ªæ ¼å­éƒ½æœ‰ä¸€ä¸ªçŸ³å¤´çš„æœ€å°‘æ“ä½œæ¬¡æ•°ä¸º 4 ã€‚
```

**æç¤ºï¼š**

- `grid.length == grid[i].length == 3`
- `0 <= grid[i][j] <= 9`
- `grid` Â ä¸­å…ƒç´ ä¹‹å’Œä¸ºÂ  `9` ã€‚

é¢˜ç›®æ¥æºï¼š [åŠ›æ‰£ 2850. å°†çŸ³å¤´åˆ†æ•£åˆ°ç½‘æ ¼å›¾çš„æœ€å°‘ç§»åŠ¨æ¬¡æ•°](https://leetcode.cn/problems/minimum-moves-to-spread-stones-over-grid/) ã€‚

#### åŸºæœ¬æ€è·¯

è¿™ä¸ªé¢˜æŒºæœ‰æ„æ€çš„ï¼Œæˆ‘ä¸€å¼€å§‹å°±æƒ³ç”¨ [BFS ç®—æ³•æ¡†æ¶](https://labuladong.online/zh/algo/essential-technique/bfs-framework/) ç»™å®ƒç§’äº†ï¼Œä½†è¯•äº†ä¸‹å‘ç°ä¸è¡Œã€‚æ™®é€š BFS åšä¸äº†è¿™ç§èµ„æºåˆ†é…å‹çš„é—®é¢˜ï¼Œéœ€è¦å›¾è®ºé‡Œé¢æ›´å¤æ‚çš„ç½‘ç»œæµç®—æ³•æ‰èƒ½åšã€‚

åé¢æˆ‘ä¼šåœ¨ç½‘ç«™è¡¥å……è¿™äº›é«˜çº§å›¾ç®—æ³•ï¼Œè¿™é‡Œå°±å…ˆåˆ†äº«ä¸€ä¸‹æˆ‘çš„ BFS ç®—æ³•å§ï¼Œè§ä»£ç ä¸­çš„ `FirstWrongBFSSolution` ç±»ï¼Œè™½ç„¶æ— æ³•é€šè¿‡è¿™é“é¢˜ï¼Œä½†æ˜¯å¯èƒ½å¯ä»¥åŠ æ·±ä½ å¯¹ BFS ç®—æ³•æ¡†æ¶çš„æŠ½è±¡è¿ç”¨èƒ½åŠ›ã€‚

æ³¨é‡Šå†™çš„æ¯”è¾ƒæ¸…æ¥šäº†ï¼Œæˆ‘çš„æ€è·¯æ˜¯é˜Ÿåˆ—ä¸­çš„èŠ‚ç‚¹è®°å½•è‡ªå·±çš„å‡ºå‘ç‚¹ï¼Œè¿™æ ·å°±èƒ½è®¡ç®—å‡ºå·²ç»ç§»åŠ¨çš„æ­¥æ•°ï¼Œå¹¶ä¸”çŸ¥é“æ˜¯å¦è¿˜æœ‰å¤šä½™çš„çŸ³å­å¯ä»¥åˆ†é…ç»™ç©ºçš„æ ¼å­ã€‚

è¿™ä¸ªè§£æ³•çœ‹ä¸å‡ºä»€ä¹ˆé—®é¢˜å¯¹å§ï¼Ÿä½†è¿™ä¸ªæµ‹è¯•ç”¨ä¾‹å°±è¿‡ä¸å»äº†ï¼š

```
[[1,0,1],

 [1,2,0],

 [1,0,3]]

src: (1, 1), cur: (1, 1), next: (1, 2)

src: (2, 2), cur: (2, 2), next: (2, 1)

src: (2, 2), cur: (1, 1), next: (0, 1)
```

æ­£ç¡®ç­”æ¡ˆæ˜¯ 3ï¼Œè€Œæˆ‘çš„ç®—æ³•è¿”å›äº† 5ã€‚çœ‹å‡ºæ¥è¿™ä¸ª 5 æ˜¯æ€ä¹ˆæ¥çš„äº†ä¹ˆï¼Ÿ

æˆ‘ä»¬é¢„æœŸ `(1, 1)` å»å¡«è¡¥ `(0, 1)` ï¼Œä½†å®é™…ä¸Šå®ƒå»å¡«è¡¥äº† `(1, 2)` ï¼Œè¿™å°±ä½¿å¾— `(2, 2)` éœ€è¦å»å¡«è¡¥ `(0, 1)` ï¼Œæ‰€ä»¥å¤šèµ°äº†å‡ æ­¥ã€‚

å›æƒ³ BFS ç®—æ³•çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œåœ¨å‘å››å‘¨æ‰©æ•£æ—¶å¾—åˆ°çš„ä¿¡æ¯æœ‰é™ï¼Œå¹¶ä¸èƒ½å‡†ç¡®åœ°æ§åˆ¶ `(1, 1)` å»å¡«è¡¥ `(0, 1)` ï¼Œæ‰€ä»¥æœ´ç´  BFS æ— æ³•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

æˆ‘åœ¨ [BFS ç®—æ³•æ¡†æ¶](https://labuladong.online/zh/algo/essential-technique/bfs-framework/) ä¸­è¯´è¿‡ï¼ŒBFS ç®—æ³•ç›¸å¯¹ DFS/å›æº¯ç®—æ³• çš„åŒºåˆ«åœ¨äº BFS é‡Œé¢æœ‰è´ªå¿ƒæ€æƒ³ã€‚é‚£ä¹ˆå¦‚æœè¿™é“é¢˜æ²¡åŠæ³•ç”¨ BFSï¼Œå†åŠ ä¸Šæ•°æ®è§„æ¨¡è¾ƒå°ï¼Œç”¨å›æº¯ç®—æ³•æš´åŠ›ç©·ä¸¾ä¸€å®šæ˜¯å¯ä»¥åšå‡ºæ¥çš„ã€‚

å›æº¯ç©·ä¸¾çš„æ€è·¯å°±æ˜¯ï¼Œæ¯”æ–¹è¯´æˆ‘æŠŠçŸ©é˜µä¸­çš„åæ ‡åˆ†ä¸º `A, B` ä¸¤ä¸ªé›†åˆï¼Œ `A` é›†åˆæ˜¯æ‰€æœ‰å€¼å¤§äº 1 çš„åæ ‡ï¼Œ `B` é›†åˆæ˜¯æ‰€æœ‰å€¼ç­‰äº 0 çš„åæ ‡ã€‚

é‚£ä¹ˆè¿™å°±å¯ä»¥å¥—ç”¨ [çƒç›’æ¨¡å‹ï¼šå›æº¯ç®—æ³•çš„ä¸¤ç§è§†è§’](https://labuladong.online/zh/algo/practice-in-action/two-views-of-backtrack/) çš„ç©·ä¸¾æ€è·¯äº†ï¼šä» `A` é›†åˆä¸­æ¯ä¸ªåæ ‡çš„è§†è§’æ¥çœ‹ï¼Œå®ƒå¯ä»¥åœ¨ `B` é›†åˆä¸­é€‰æ‹©è‹¥å¹²ä¸ªåæ ‡è¿›è¡Œå¡«å……ã€‚

è¿™æ ·å°±å¯ä»¥ç›´æ¥å†™å‡ºå›æº¯ç®—æ³•çš„ä»£ç äº†ï¼Œå…·ä½“çœ‹æˆ‘çš„è§£æ³•ä»£ç å’Œæ³¨é‡Šå§ã€‚

#### è§£æ³•ä»£ç 

```
// å°è¯• BFS æ¡†æ¶å¤±è´¥ï¼Œå¤±è´¥åŸå› è§æˆ‘çš„æ€è·¯åˆ†æ

class FirstWrongBFSSolution {

    struct State {

        int srcX, srcY;

        int curX, curY;

        State(int sx, int sy, int cx, int cy) : srcX(sx), srcY(sy), curX(cx), curY(cy) {}

    };

public:

    int minimumMoves(vector<vector<int>>& grid) {

        int m = grid.size(), n = grid[0].size();

        queue<State> q;

        for (int i = 0; i < m; i++) {

            for (int j = 0; j < n; j++) {

                if (grid[i][j] > 1) {

                    q.push(State(i, j, i, j));

                }

            }

        }

        int steps = 0;

        vector<vector<int>> dirs = {{0, 1}, {1, 0}, {0, -1}, {-1, 0}};

        while (!q.empty()) {

            State cur = q.front();

            q.pop();

            int srcX = cur.srcX, srcY = cur.srcY;

            int curX = cur.curX, curY = cur.curY;

            for (auto dir : dirs) {

                int nextX = curX + dir[0], nextY = curY + dir[1];

                if (nextX < 0 || nextX >= m || nextY < 0 || nextY >= n) {

                    continue;

                }

                if (grid[srcX][srcY] == 1) {

                    // å·²ç»æ²¡æœ‰å¤šä½™çŸ³å­è¿›è¡Œåˆ†é…äº†ï¼Œä¸å¿…å†å…¥é˜Ÿäº†

                    break;

                }

                // è¿˜æœ‰çŸ³å­å¯ä»¥åˆ†é…ï¼Œçœ‹ä¸‹å½“å‰è¿™ä¸ªæ ¼å­æ˜¯å¦éœ€è¦åˆ†é…

                if (grid[nextX][nextY] == 0) {

                    cout << "src: (" << srcX << ", " << srcY << "), cur: (" << curX << ", " << curY << "), next: (" << nextX << ", " << nextY << ")" << endl;

                    // éœ€è¦åˆ†é…ï¼Œå°±ç»™å½“å‰æ ¼å­åˆ†é…ä¸€ä¸ª

                    grid[nextX][nextY] = 1;

                    grid[srcX][srcY]--;

                    steps += abs(srcX - nextX) + abs(srcY - nextY);

                }

                // ç»§ç»­å¾€ä¸‹ä¸€ä¸ªæ ¼å­èµ°

                if (grid[srcX][srcY] > 1) {

                    // è¿˜æœ‰çŸ³å­å¯ä»¥åˆ†é…ï¼Œå°±ç»§ç»­å…¥é˜Ÿ

                    q.push(State(srcX, srcY, nextX, nextY));

                }

            }

        }

        return steps;

    }

};

// ç”¨å›æº¯ç®—æ³•æ¡†æ¶æš´åŠ›ç©·ä¸¾

class Solution {

    // è®°å½•æœ€å°‘çš„ç§»åŠ¨æ¬¡æ•°

    int minMove = INT_MAX;

    // å›æº¯è¿‡ç¨‹ä¸­çš„ç§»åŠ¨æ¬¡æ•°

    int move = 0;

    // è®°å½•ç©ºä½çš„æ•°é‡ï¼Œä»¥ä¾¿çŸ¥é“ä»€ä¹ˆæ—¶å€™å¡«æ»¡äº†æ‰€æœ‰ç©ºæ ¼

    int emptyCount = 0;

public:

    int minimumMoves(vector<vector<int>>& grid) {

        // è®°å½•å¯åˆ†é…çš„åæ ‡ä½ç½®

        vector<pair<int, int>> redundant;

        // è®°å½•å¾…åˆ†é…çš„åæ ‡ä½ç½®

        vector<pair<int, int>> empty;

        int m = grid.size(), n = grid[0].size();

        for (int i = 0; i < m; i++) {

            for (int j = 0; j < n; j++) {

                if (grid[i][j] > 1) {

                    redundant.push_back({i, j});

                } else if (grid[i][j] == 0) {

                    empty.push_back({i, j});

                    emptyCount++;

                }

            }

        }

        backtrack(grid, redundant, empty);

        return minMove;

    }

private:

    void backtrack(vector<vector<int>>& grid, vector<pair<int, int>>& redundant, vector<pair<int, int>>& empty) {

        if (emptyCount == 0) {

            // æ‰€æœ‰ç©ºä½éƒ½å¡«ä¸Šäº†ï¼Œæ›´æ–°æœ€å°‘çš„ç§»åŠ¨æ¬¡æ•°

            minMove = min(minMove, move);

            return;

        }

        // ä»å¯åˆ†é…çš„åæ ‡çš„è§†è§’è¿›è¡Œå›æº¯ç©·ä¸¾

        // å¯ä»¥é€‰æ‹©ä»»æ„ä¸€ä¸ª empty åæ ‡è¿›è¡Œå¡«å……

        for (auto r : redundant) {

            int srcX = r.first, srcY = r.second;

            if (grid[srcX][srcY] == 1) {

                // è¿™ä¸ªåæ ‡å·²ç»æ²¡æœ‰å¤šä½™çš„çŸ³å­å¯ä»¥åˆ†é…äº†

                continue;

            }

            for (auto e : empty) {

                int destX = e.first, destY = e.second;

                if (grid[destX][destY] != 0) {

                    // è¿™ä¸ªåæ ‡å·²ç»è¢«å¡«å……è¿‡äº†

                    continue;

                }

                // è®¡ç®—å¡«å……çš„æ­¥æ•°

                int step = abs(srcX - destX) + abs(srcY - destY);

                // åšé€‰æ‹©ï¼Œç§»åŠ¨çŸ³å­å¡«å……è¿‡æ¥

                grid[destX][destY] = 1;

                grid[srcX][srcY]--;

                move += step;

                emptyCount--;

                // é€’å½’

                backtrack(grid, redundant, empty);

                // æ’¤é”€é€‰æ‹©

                grid[destX][destY] = 0;

                grid[srcX][srcY]++;

                move -= step;

                emptyCount++;

            }

        }

    }

};
```

#### ç®—æ³•å¯è§†åŒ–

ç®—æ³•å¯è§†åŒ–

### 1723\. å®Œæˆæ‰€æœ‰å·¥ä½œçš„æœ€çŸ­æ—¶é—´

**1723\. å®Œæˆæ‰€æœ‰å·¥ä½œçš„æœ€çŸ­æ—¶é—´** | [åŠ›æ‰£](https://leetcode.cn/problems/find-minimum-time-to-finish-all-jobs/) | [LeetCode](https://leetcode.com/problems/find-minimum-time-to-finish-all-jobs/)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `jobs` ï¼Œå…¶ä¸­ `jobs[i]` æ˜¯å®Œæˆç¬¬ `i` é¡¹å·¥ä½œè¦èŠ±è´¹çš„æ—¶é—´ã€‚

è¯·ä½ å°†è¿™äº›å·¥ä½œåˆ†é…ç»™ `k` ä½å·¥äººã€‚æ‰€æœ‰å·¥ä½œéƒ½åº”è¯¥åˆ†é…ç»™å·¥äººï¼Œä¸”æ¯é¡¹å·¥ä½œåªèƒ½åˆ†é…ç»™ä¸€ä½å·¥äººã€‚å·¥äººçš„ **å·¥ä½œæ—¶é—´** æ˜¯å®Œæˆåˆ†é…ç»™ä»–ä»¬çš„æ‰€æœ‰å·¥ä½œèŠ±è´¹æ—¶é—´çš„æ€»å’Œã€‚è¯·ä½ è®¾è®¡ä¸€å¥—æœ€ä½³çš„å·¥ä½œåˆ†é…æ–¹æ¡ˆï¼Œä½¿å·¥äººçš„ **æœ€å¤§å·¥ä½œæ—¶é—´** å¾—ä»¥ **æœ€å°åŒ–** ã€‚

è¿”å›åˆ†é…æ–¹æ¡ˆä¸­å°½å¯èƒ½ **æœ€å°** çš„ **æœ€å¤§å·¥ä½œæ—¶é—´** ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šjobs = [3,2,3], k = 3
è¾“å‡ºï¼š3
è§£é‡Šï¼šç»™æ¯ä½å·¥äººåˆ†é…ä¸€é¡¹å·¥ä½œï¼Œæœ€å¤§å·¥ä½œæ—¶é—´æ˜¯ 3 ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šjobs = [1,2,4,7,8], k = 2
è¾“å‡ºï¼š11
è§£é‡Šï¼šæŒ‰ä¸‹è¿°æ–¹å¼åˆ†é…å·¥ä½œï¼š
1 å·å·¥äººï¼š1ã€2ã€8ï¼ˆå·¥ä½œæ—¶é—´ = 1 + 2 + 8 = 11ï¼‰
2 å·å·¥äººï¼š4ã€7ï¼ˆå·¥ä½œæ—¶é—´ = 4 + 7 = 11ï¼‰
æœ€å¤§å·¥ä½œæ—¶é—´æ˜¯ 11 ã€‚
```

**æç¤ºï¼š**

- `1 <= k <= jobs.length <= 12`
- `1 <= jobs[i] <= 10<sup>7</sup>`

é¢˜ç›®æ¥æºï¼š [åŠ›æ‰£ 1723. å®Œæˆæ‰€æœ‰å·¥ä½œçš„æœ€çŸ­æ—¶é—´](https://leetcode.cn/problems/find-minimum-time-to-finish-all-jobs/) ã€‚

#### åŸºæœ¬æ€è·¯

æˆ‘åœ¨ç½‘ç«™æ•™ç¨‹ã€ä¹ é¢˜ä¸­è¯´è¿‡å¾ˆå¤šæ¬¡ï¼Œçœ‹åˆ°æ‰€æœ‰ç®—æ³•é¢˜ï¼Œé¦–å…ˆå°±ä»æš´åŠ›ç©·ä¸¾çš„è§’åº¦å…¥æ‰‹ï¼Œä¸è¦ä¸€å¼€å§‹å°±æƒ³ç€å–å·§ã€‚

è¿™é“é¢˜æ˜¯ä¸€æ ·çš„ï¼Œä¸è¦æƒ³ç€å¦‚ä½•èŠ±å¼å‹æ¦¨å‘˜å·¥ï¼Œä½ å°±æ€è€ƒå¦‚ä½•ç©·ä¸¾æ‰€æœ‰åˆ†é…æ–¹æ¡ˆå°±è¡Œäº†ã€‚åªè¦ä½ èƒ½ç©·ä¸¾å‡ºæ¥æ‰€æœ‰çš„åˆ†é…æ–¹æ¡ˆï¼Œé‚£ä¹ˆæœ€ä¼˜çš„é‚£ä¸ªæ–¹æ¡ˆå°±ä¸€å®šèƒ½æ¯”è¾ƒå‡ºæ¥ã€‚

ç°åœ¨è¿™ä¸ªåœºæ™¯ï¼Œæœ‰å·¥äººï¼Œæœ‰ `jobs` ï¼Œæœ‰æ²¡æœ‰è”æƒ³åˆ° [çƒç›’æ¨¡å‹ï¼šå›æº¯ç®—æ³•çš„ä¸¤ç§ç©·ä¸¾è§†è§’](https://labuladong.online/zh/algo/practice-in-action/two-views-of-backtrack/) ï¼Ÿ

è¦ä¹ˆä»å‘˜å·¥çš„è§†è§’æ¥é€‰ `job` ï¼Œè¦ä¹ˆä» `job` çš„è§†è§’æ¥é€‰å‘˜å·¥ï¼Œå›æº¯ç®—æ³•çš„ä¸¤ç§æ€è·¯æ˜¯ä¸æ˜¯å°±å‡ºæ¥äº†ï¼Ÿå¿ƒé‡Œé‚£æ£µå¤šå‰æ ‘æ˜¯ä¸æ˜¯ä¹Ÿå‡ºæ¥äº†ã€‚

è€Œä¸”ä½ çœ‹è¿™é¢˜çš„æ•°æ®è§„æ¨¡ `1 <= k <= jobs.length <= 12` è¿™ä¹ˆå°ï¼Œæš´åŠ›ç©·ä¸¾å¤§æ¦‚ç‡æ˜¯å¯ä»¥é€šè¿‡çš„ã€‚

ä½œä¸ºæ²¡æœ‰é€‰æ‹©æƒçš„æ‰“å·¥äººï¼Œæˆ‘å°±ä» `job` çš„è§†è§’æ¥é€‰æ‹©å‘˜å·¥å§ï¼Œé€»è¾‘æ¯”è¾ƒæ¸…æ™°ï¼Œå…·ä½“å¯ä»¥çœ‹ä»£ç ä¸­çš„æ³¨é‡Šã€‚

è¿™é‡Œéœ€è¦æ³¨æ„å¯¹å›æº¯ç®—æ³•çš„ä¸¤ä¸ªå‰ªæä¼˜åŒ–ï¼Œç¬¬ä¸€ä¸ªå‰ªæä¼˜åŒ–å®¹æ˜“æƒ³åˆ°ï¼Œå…³é”®æ˜¯ç¬¬äºŒä¸ªï¼Œå³ `chosen` é›†åˆçš„ä¼˜åŒ–ã€‚æˆ‘åœ¨åšè¿™é“é¢˜çš„æ—¶å€™ï¼ŒèŠ±äº†æŒºé•¿æ—¶é—´æ‰æƒ³å‡ºæ¥è¿™ä¸ªä¼˜åŒ–ç‚¹ã€‚

ä½ æƒ³ä¸‹ï¼Œ `job` åªå…³å¿ƒè‡ªå·±æ˜¯å¦è¢«è®¤é¢†ï¼Œè€Œä¸å…³å¿ƒæ˜¯è¢«è°é¢†äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªå·¥äººåœ¨ `job` çš„è§†è§’å…¶å®æ˜¯æ²¡æœ‰åŒºåˆ«çš„ã€‚

é‚£ä¹ˆï¼Œå¦‚æœæœ‰å¤šä¸ªå·¥äººå·²æœ‰çš„å·¥ä½œé‡éƒ½æ˜¯ `workload = 3` ï¼Œé‚£ä¹ˆ `job` å…¶å®åªéœ€è¦å°è¯•åˆ†é…ç»™ `workload = 3` ä¸€æ¬¡å°±è¡Œäº†ï¼Œä¸ç”¨é‡å¤å°è¯•ï¼Œå› ä¸ºè®¡ç®—ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚

æœ€åæ‰©å±•å»¶ä¼¸ä¸€ä¸‹ï¼Œè¿™é“é¢˜å’Œ [1723\. å®Œæˆæ‰€æœ‰å·¥ä½œçš„æœ€çŸ­æ—¶é—´](https://leetcode.cn/problems/find-minimum-time-to-finish-all-jobs/description/) ã€ [1011\. åœ¨Då¤©å†…é€è¾¾åŒ…è£¹çš„èƒ½åŠ›](https://leetcode.cn/problems/capacity-to-ship-packages-within-d-days/description/) éƒ½æœ‰ç‚¹ç±»ä¼¼ã€‚1723 é¢˜ç›¸å½“äºæ˜¯æœ¬é¢˜çš„ç®€åŒ–ç‰ˆï¼Œæ•°æ®è§„æ¨¡å°äº›ï¼Œä¸éœ€è¦ç‰¹åˆ«çš„å‰ªæä¼˜åŒ–å°±èƒ½è¿‡ï¼›è€Œ 1011 é¢˜ç›¸å½“äºæ˜¯ç»™äº†ä½ ä¸€ä¸ªå·¥ä½œæ—¶é—´çš„æœ€å¤§é™åˆ¶ï¼Œè®©ä½ è®¡ç®—è‡³å°‘éœ€è¦å¤šå°‘å·¥äººï¼Œè€Œè¿™é“é¢˜æ˜¯ç»™äº†ä½ å·¥äººçš„æ•°é‡ï¼Œè®©ä½ è®¡ç®—æœ€å°çš„å·¥ä½œæ—¶é—´ã€‚

è¿™é“é¢˜ä¹Ÿæ˜¯å¯ä»¥ç”¨äºŒåˆ†æœç´¢æ¥è¿›ä¸€æ­¥ä¼˜åŒ–çš„ï¼Œå¯ä»¥ç»“åˆ [äºŒåˆ†æœç´¢æ¡†æ¶çš„è¿ç”¨æ€è·¯](https://labuladong.online/zh/algo/frequency-interview/binary-search-in-action/) æ¥æ€è€ƒï¼Œæœ‰å…´è¶£å¯ä»¥è‡ªè¡Œä¼˜åŒ–ä¸€ä¸‹ã€‚

#### è§£æ³•ä»£ç 

```
class Solution {

public:

    int minimumTimeRequired(vector<int>& jobs, int k) {

        vector<int> workloads(k, 0);

        backtrack(jobs, 0, workloads);

        return res;

    }

private:

    // è®°å½•æ‰€æœ‰åˆ†é…æ–¹æ¡ˆä¸­çš„ã€Œæœ€å¤§å·¥ä½œæ—¶é—´ã€çš„æœ€å°å€¼

    int res = INT_MAX;

    void backtrack(vector<int>& jobs, int jobIdx, vector<int>& workloads) {

        if (jobIdx == jobs.size()) {

            // æ‰¾åˆ°ä¸€ä¸ªåˆ†é…æ–¹æ¡ˆ

            // è®¡ç®—å½“å‰åˆ†é…æ–¹æ¡ˆä¸‹çš„æœ€å¤§å·¥ä½œæ—¶é—´

            int max = 0;

            for (int workload : workloads) {

                max = max > workload ? max : workload;

            }

            // æ›´æ–°ã€Œæ‰€æœ‰åˆ†é…æ–¹æ¡ˆä¸­çš„æœ€å¤§å·¥ä½œæ—¶é—´ã€çš„æœ€å°å€¼

            res = res < max ? res : max;

            return;

        }

        // ä»å½“å‰çš„ jobs[jobIdx] æ¥é€‰æ‹©å·¥äºº

        // æ³¨æ„ï¼Œè¿™ä¸ª chosen æ˜¯ä¸€ä¸ªå…³é”®çš„å‰ªæä¼˜åŒ–ï¼Œå…·ä½“çœ‹æˆ‘åœ¨æ€è·¯éƒ¨åˆ†çš„è§£é‡Š

        unordered_set<int> chosen;

        for (int workerIdx = 0; workerIdx < workloads.size(); workerIdx++) {

            if (workloads[workerIdx] + jobs[jobIdx] >= res) {

                // å‰ªæä¼˜åŒ–ï¼šå¦‚æœå½“å‰å·¥äººçš„å·¥ä½œæ—¶é—´åŠ ä¸Šå½“å‰çš„å·¥ä½œæ—¶é—´å·²ç»è¶…è¿‡äº†å½“å‰çš„æœ€ä¼˜è§£ï¼Œé‚£ä¹ˆå°±ä¸ç”¨ç»§ç»­å°è¯•äº†

                continue;

            }

            if (chosen.find(workloads[workerIdx]) != chosen.end()) {

                // å‰ªæä¼˜åŒ–ï¼šå¦‚æœå‰é¢æ›¾æœ‰å·¥äººæœ‰è¿™ä¸ª workloadï¼Œåˆ™ä¸å¿…æŠŠå½“å‰å·¥ä½œåˆ†é…ç»™ä»–

                continue;

            }

            // åšé€‰æ‹©ï¼Œå°† jobs[jobIdx] åˆ†é…ç»™å·¥äºº workreIdx

            chosen.insert(workloads[workerIdx]);

            workloads[workerIdx] += jobs[jobIdx];

            backtrack(jobs, jobIdx + 1, workloads);

            // æ’¤é”€é€‰æ‹©

            workloads[workerIdx] -= jobs[jobIdx];

        }

    }

};
```

#### ç®—æ³•å¯è§†åŒ–

ç®—æ³•å¯è§†åŒ–

### 2305\. å…¬å¹³åˆ†å‘é¥¼å¹²

**2305\. å…¬å¹³åˆ†å‘é¥¼å¹²** | [åŠ›æ‰£](https://leetcode.cn/problems/fair-distribution-of-cookies/) | [LeetCode](https://leetcode.com/problems/fair-distribution-of-cookies/)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `cookies` ï¼Œå…¶ä¸­ `cookies[i]` è¡¨ç¤ºåœ¨ç¬¬ `i` ä¸ªé›¶é£ŸåŒ…ä¸­çš„é¥¼å¹²æ•°é‡ã€‚å¦ç»™ä½ ä¸€ä¸ªæ•´æ•° `k` è¡¨ç¤ºç­‰å¾…åˆ†å‘é›¶é£ŸåŒ…çš„å­©å­æ•°é‡ï¼Œ **æ‰€æœ‰** é›¶é£ŸåŒ…éƒ½éœ€è¦åˆ†å‘ã€‚åœ¨åŒä¸€ä¸ªé›¶é£ŸåŒ…ä¸­çš„æ‰€æœ‰é¥¼å¹²éƒ½å¿…é¡»åˆ†å‘ç»™åŒä¸€ä¸ªå­©å­ï¼Œä¸èƒ½åˆ†å¼€ã€‚

åˆ†å‘çš„ **ä¸å…¬å¹³ç¨‹åº¦** å®šä¹‰ä¸ºå•ä¸ªå­©å­åœ¨åˆ†å‘è¿‡ç¨‹ä¸­èƒ½å¤Ÿè·å¾—é¥¼å¹²çš„æœ€å¤§æ€»æ•°ã€‚

è¿”å›æ‰€æœ‰åˆ†å‘çš„æœ€å°ä¸å…¬å¹³ç¨‹åº¦ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šcookies = [8,15,10,20,8], k = 2
è¾“å‡ºï¼š31
è§£é‡Šï¼šä¸€ç§æœ€ä¼˜æ–¹æ¡ˆæ˜¯ [8,15,8] å’Œ [10,20] ã€‚
- ç¬¬ 1 ä¸ªå­©å­åˆ†åˆ° [8,15,8] ï¼Œæ€»è®¡ 8 + 15 + 8 = 31 å—é¥¼å¹²ã€‚
- ç¬¬ 2 ä¸ªå­©å­åˆ†åˆ° [10,20] ï¼Œæ€»è®¡ 10 + 20 = 30 å—é¥¼å¹²ã€‚
åˆ†å‘çš„ä¸å…¬å¹³ç¨‹åº¦ä¸º max(31,30) = 31 ã€‚
å¯ä»¥è¯æ˜ä¸å­˜åœ¨ä¸å…¬å¹³ç¨‹åº¦å°äº 31 çš„åˆ†å‘æ–¹æ¡ˆã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šcookies = [6,1,3,2,2,4,1,2], k = 3
è¾“å‡ºï¼š7
è§£é‡Šï¼šä¸€ç§æœ€ä¼˜æ–¹æ¡ˆæ˜¯ [6,1]ã€[3,2,2] å’Œ [4,1,2] ã€‚
- ç¬¬ 1 ä¸ªå­©å­åˆ†åˆ° [6,1] ï¼Œæ€»è®¡ 6 + 1 = 7 å—é¥¼å¹²ã€‚ 
- ç¬¬ 2 ä¸ªå­©å­åˆ†åˆ° [3,2,2] ï¼Œæ€»è®¡ 3 + 2 + 2 = 7 å—é¥¼å¹²ã€‚
- ç¬¬ 3 ä¸ªå­©å­åˆ†åˆ° [4,1,2] ï¼Œæ€»è®¡ 4 + 1 + 2 = 7 å—é¥¼å¹²ã€‚
åˆ†å‘çš„ä¸å…¬å¹³ç¨‹åº¦ä¸º max(7,7,7) = 7 ã€‚
å¯ä»¥è¯æ˜ä¸å­˜åœ¨ä¸å…¬å¹³ç¨‹åº¦å°äº 7 çš„åˆ†å‘æ–¹æ¡ˆã€‚
```

**æç¤ºï¼š**

- `2 <= cookies.length <= 8`
- `1 <= cookies[i] <= 10<sup>5</sup>`
- `2 <= k <= cookies.length`

é¢˜ç›®æ¥æºï¼š [åŠ›æ‰£ 2305. å…¬å¹³åˆ†å‘é¥¼å¹²](https://leetcode.cn/problems/fair-distribution-of-cookies/) ã€‚

#### åŸºæœ¬æ€è·¯

è¿™é¢˜å’Œ [1723\. å®Œæˆæ‰€æœ‰å·¥ä½œçš„æœ€çŸ­æ—¶é—´](https://leetcode.cn/problems/find-minimum-time-to-finish-all-jobs/description/) æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œæˆ‘ç›´æ¥æŠŠ 1723 çš„ä»£ç å¤åˆ¶è¿‡æ¥æ”¹äº†ä¸ªå‡½æ•°åå°±é€šè¿‡äº†ã€‚

ä¸è¿‡è¿™é“é¢˜æ›´ç®€å•ä¸€äº›ï¼Œå› ä¸ºæ•°æ®è§„æ¨¡æ›´å°ã€‚1723 çš„éš¾åº¦æ˜¯å›°éš¾ï¼Œä¸»è¦å°±éš¾åœ¨å¯¹å›æº¯ç®—æ³•çš„å‰ªæä¼˜åŒ–ä¸Šï¼Œç›´æ¥å»çœ‹ 1723 çš„æ€è·¯å§ã€‚

#### è§£æ³•ä»£ç 

```
#include <vector>

#include <algorithm>

#include <unordered_set>

#include <climits>

using namespace std;

class Solution {

public:

    int distributeCookies(vector<int>& jobs, int k) {

        vector<int> workloads(k, 0);

        backtrack(jobs, 0, workloads);

        return res;

    }

    // è®°å½•æ‰€æœ‰åˆ†é…æ–¹æ¡ˆä¸­çš„ã€Œæœ€å¤§å·¥ä½œæ—¶é—´ã€çš„æœ€å°å€¼

    int res = INT_MAX;

    void backtrack(vector<int>& jobs, int jobIdx, vector<int>& workloads) {

        if (jobIdx == jobs.size()) {

            // æ‰¾åˆ°ä¸€ä¸ªåˆ†é…æ–¹æ¡ˆ

            // è®¡ç®—å½“å‰åˆ†é…æ–¹æ¡ˆä¸‹çš„æœ€å¤§å·¥ä½œæ—¶é—´

            int maxWorkload = *max_element(workloads.begin(), workloads.end());

            // æ›´æ–°ã€Œæ‰€æœ‰åˆ†é…æ–¹æ¡ˆä¸­çš„æœ€å¤§å·¥ä½œæ—¶é—´ã€çš„æœ€å°å€¼

            res = min(res, maxWorkload);

            return;

        }

        // ä»å½“å‰çš„ jobs[jobIdx] æ¥é€‰æ‹©å·¥äºº

        // æ³¨æ„ï¼Œè¿™ä¸ª chosen æ˜¯ä¸€ä¸ªå…³é”®çš„å‰ªæä¼˜åŒ–ï¼Œå…·ä½“çœ‹æˆ‘åœ¨æ€è·¯éƒ¨åˆ†çš„è§£é‡Š

        unordered_set<int> chosen;

        for (int workreIdx = 0; workreIdx < workloads.size(); workreIdx++) {

            if (workloads[workreIdx] + jobs[jobIdx] >= res) {

                // å‰ªæä¼˜åŒ–ï¼šå¦‚æœå½“å‰å·¥äººçš„å·¥ä½œæ—¶é—´åŠ ä¸Šå½“å‰çš„å·¥ä½œæ—¶é—´å·²ç»è¶…è¿‡äº†å½“å‰çš„æœ€ä¼˜è§£ï¼Œé‚£ä¹ˆå°±ä¸ç”¨ç»§ç»­å°è¯•äº†

                continue;

            }

            if (chosen.count(workloads[workreIdx])) {

                // å‰ªæä¼˜åŒ–ï¼šå¦‚æœå‰é¢æ›¾æœ‰å·¥äººæœ‰è¿™ä¸ª workloadï¼Œåˆ™ä¸å¿…æŠŠå½“å‰å·¥ä½œåˆ†é…ç»™ä»–

                continue;

            }

            // åšé€‰æ‹©ï¼Œå°† jobs[jobIdx] åˆ†é…ç»™å·¥äºº workreIdx

            chosen.insert(workloads[workreIdx]);

            workloads[workreIdx] += jobs[jobIdx];

            backtrack(jobs, jobIdx + 1, workloads);

            // æ’¤é”€é€‰æ‹©

            workloads[workreIdx] -= jobs[jobIdx];

        }

    }

};
```

#### ç®—æ³•å¯è§†åŒ–

ç®—æ³•å¯è§†åŒ–

æ›´æ–°æ—¶é—´ï¼š2026/02/17 14:24

## è¯„è®º(5)

Markdown

Ctrl+Enter å‘è¡¨

O

OliverLengLLL 10 ä¸ªæœˆå‰

ä¸œå“¥ï¼Œæˆ‘è¿˜æ˜¯å¯¹ä»€ä¹ˆæ—¶å€™é€‰æ‹©ç›’è§†è§’å’Œä»€ä¹ˆæ—¶å€™é€‰æ‹©çƒè§†è§’æœ‰ç‚¹æ‡µ

![Yuuuuu](https://thirdwx.qlogo.cn/mmopen/vi_32/3eLEXowzDITh7HtkklXC0bkPsWcmxLhElR558AsW1mHb9ltBqYzRtbLzEzmEBfzWJt1S2viaW8J1ZP2sNslruTw/132)

Yuuuuu 11 ä¸ªæœˆå‰

çœ‹å‡ºæ¥äº†ï¼Œçƒçš„ç‰¹ç‚¹å°±æ˜¯æ¯æ¬¡åªèƒ½è¢«ä¸€ä¸ªç›’å­é€‰æ‹©ã€‚ ç›’å­çš„ç‰¹ç‚¹æ˜¯å¯ä»¥é€‰æ‹©å¤šä¸ªçƒã€‚â€©ï¼ˆçƒå¾€å¾€æ˜¯é€šè¿‡ä¸€ä¸ªæ•°ç»„ä¸‹æ ‡æ¥åŒºåˆ†çš„ï¼Œè€Œç›’å­æ˜¯é€šè¿‡å®¹é‡æ¥åŒºåˆ†çš„ï¼‰â€©â€©æ‰€ä»¥ç›’å­æ˜¯å·¥äººï¼Œæ˜¯å°å­©â€©çƒæ˜¯å·¥ä½œå’Œé¥¼å¹²ã€‚â€©â€©å¦‚æœä»¥éå†çƒä¸ºè§†è§’ï¼Œå°±æ˜¯ä¸€ä¸ªå¤šå‰æ ‘ã€‚â€©æ¯ä¸€å±‚å¯ä»¥é€‰æ‹©è£…è¿›ä»»æ„ä¸€ä¸ªç›’å­é‡Œé¢ã€‚â€©â€©æ‰€ä»¥è¿™ä¸ªè§†è§’ä¸‹çš„å‰ªæã€‚å°±æ˜¯æ¯ä¸€å±‚åˆ›å»ºä¸€ä¸ªsetï¼Œå½“å‰çƒé€‰è¿‡å“ªäº›å®¹é‡çš„ç›’å­ã€‚å¦‚æœå‡ºç°ç›¸åŒçš„å®¹é‡å°±è·³è¿‡ï¼ˆå› ä¸ºåŒä¸€ä¸ªæ ‘å±‚ï¼Œä¸¤ä¸ªç›¸åŒçš„èŠ‚ç‚¹æ„æˆçš„å­æ ‘ä¸€å®šæ˜¯ç›¸åŒçš„ï¼‰â€©â€©å¦‚æœéå†ç›’å­ï¼Œé‚£ä¹ˆæ¯ä¸ªç›’å­å°±æ˜¯ä¸€ä¸ªäºŒå‰æ ‘ï¼Œå¯¹äºèŠ‚ç‚¹åªæœ‰é€‰æˆ–è€…ä¸é€‰ã€‚â€©å½“ä¸€ä¸ªç›’å­è£…å®Œä»¥åï¼Œå°±è£…ä¸‹ä¸€ä¸ªç›’å­ã€‚ä¸‹ä¸€ä¸ªç›’å­åˆæ˜¯ä¸€é¢—äºŒå‰æ ‘ã€‚â€©æ‰€ä»¥ä»¥ç›’å­ä¸ºè§†è§’å¿…é¡»ç»´æŠ¤ä¸¤ä¸ªå˜é‡ã€‚ä¸€ä¸ªæ˜¯å½“å‰æ˜¯å‡ å·ç›’å­ã€‚ä¸€ä¸ªæ˜¯çƒçš„ä¸‹æ ‡ã€‚â€©â€©åœ¨åŒä¸€ä¸ªç›’å­é‡Œé¢ï¼Œå˜åŒ–çš„æ˜¯çƒçš„ä¸‹æ ‡ã€‚ â€©å½“ä¸€ä¸ªç›’å­è£…æ»¡ä»¥åï¼Œç›’å­çš„ä¸‹æ ‡+1ã€‚â€©â€©è‡³äºä»ç›’å­çš„æ—¶è§†è§’å¦‚ä½•å‰ªæã€‚ å°±æ˜¯å½“è¿›å…¥ä¸€ä¸ªç›’å­çš„æ—¶å€™ï¼Œå¦‚æœçƒçš„è®¿é—®æƒ…å†µç›¸åŒã€‚é‚£ä¹ˆå°±å¯ä»¥å‰ªæã€‚ å¯ä»¥æŠŠå¤šä¸ªç›’å­æƒ³è±¡åœ¨åŒä¸€å±‚ã€‚çƒçš„è®¿é—®æƒ…å†µå°±æ˜¯èŠ‚ç‚¹çš„å€¼ã€‚ç›¸åŒèŠ‚ç‚¹ä¸€å®šæ„æˆä¸€ä¸ªç›¸åŒçš„çš„å­æ ‘ã€‚

![Yuuuuu](https://thirdwx.qlogo.cn/mmopen/vi_32/3eLEXowzDITh7HtkklXC0bkPsWcmxLhElR558AsW1mHb9ltBqYzRtbLzEzmEBfzWJt1S2viaW8J1ZP2sNslruTw/132)

Yuuuuu 11 ä¸ªæœˆå‰

å“­äº†ï¼Œä¸¤ä¸ªæœˆå‰æˆ‘è¿˜æ˜¯ç®€å•é¢˜éƒ½ä¸ä¼šåšçš„ï¼Œ è·Ÿç€æ‹‰ä¸æ‹‰å“¥ï¼Œè·Ÿåˆ°è¿™é‡Œã€‚ æˆ‘å·²ç»å¯ä»¥ä¸çœ‹é¢˜è§£ï¼Œç‹¬ç«‹ac 301 åˆ é™¤æ— æ•ˆæ‹¬å·è¿™ç§å›°éš¾é¢˜äº†ï¼ˆè™½ç„¶èŠ±äº†åŠä¸ªå°æ—¶ï¼‰ã€‚æˆ‘è‡ªå·±éƒ½ä¸æ•¢ç›¸ä¿¡ğŸ˜­

æœç„¶èŠ±ç²¾åŠ›æŠŠäºŒå‰æ ‘é‚£ä¸€ä¸ªç³»åˆ—æ”»å…‹äº†ä»¥åï¼Œåšå›æº¯å¥½èˆ’æœï¼Œå¸Œæœ›åé¢åŠ¨æ€è§„åˆ’ä¹Ÿè¿™ä¹ˆè½»æ¾ğŸ˜Œ

![labuladong](https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKUUrMeBCJjuvHKjkDGparuRmYns8MHsWeCZza0OZerEZqUmazBMQrNKb942Tmmiad0svicOiadib8eicQ/132)

labuladong

labuladong ä¸œå“¥ 7 ä¸ªæœˆå‰

å“ˆå“ˆï¼Œç½‘ç«™è¿™ä¹ˆå¼ºè°ƒäºŒå‰æ ‘æ˜¯æœ‰é“ç†çš„

![ç”¨æˆ·_8495](https://thirdwx.qlogo.cn/mmopen/vi_32/5S2QmaYhZ6zagIJZGjzmDR8YK3qXzDDrhsQj3ugK1iaADJzscOKS875T78VxHSe7wzqz1r1cZ4XAjk0MGbJrNDAhrQp8HStfcTF19dDIUbKU/132)

ç”¨æˆ·\_8495 12 ä¸ªæœˆå‰

1. å®Œæˆæ‰€æœ‰å·¥ä½œçš„æœ€çŸ­æ—¶é—´ C++ä¼˜åŒ–æˆ0msï¼š

```
class Solution

{

public:

    vector<int> a;

    int k, n, ans = 1e9;

    int minimumTimeRequired(vector<int> &a0, int k0)

    {

        a = a0, k = k0;

        n = a.size();

        sort(a.begin(), a.end(), greater<int>());

        vector<int> b(k);

        dfs(0, b, 0);

        return ans;

    }

    void dfs(int p, vector<int> &b, int mx)

    {

        if (mx >= ans)

        {

            return;

        }

        if (p == n)

        {

            ans = mx;

            return;

        }

        for (int i = p; i < k; i++)

        {

            if (i > 0 && b[i] == b[i - 1])

            {

                continue;

            }

            b[i] += a[p];

            dfs(p + 1, b, max(mx, b[i]));

            b[i] -= a[p];

        }

        for (int i = 0; i < p && i < k; i++)

        {

            if (i > 0 && b[i] == b[i - 1])

            {

                continue;

            }

            b[i] += a[p];

            dfs(p + 1, b, max(mx, b[i]));

            b[i] -= a[p];

        }

    }

};
```